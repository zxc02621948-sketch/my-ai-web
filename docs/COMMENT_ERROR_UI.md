# 留言錯誤提示 UI 優化

> **更新日期：** 2025-10-21  
> **改進：** 從 alert/toast 改為輸入框下方的內嵌提示

---

## 🎯 **UI/UX 改進**

### **修改前（Toast 提示）：**
```
❌ 問題 1：提示在螢幕最上方，可能被忽略
❌ 問題 2：在 Modal 中不明顯
❌ 問題 3：用戶需要往上看才能看到
```

### **修改後（內嵌提示）：**
```
✅ 優點 1：錯誤提示就在輸入框正下方
✅ 優點 2：視線不需要移動
✅ 優點 3：更直觀、更明顯
✅ 優點 4：3 秒後自動消失
✅ 優點 5：用戶輸入時自動清除
```

---

## 🎨 **UI 設計**

### **錯誤提示樣式：**

```jsx
{errorMessage && (
  <div className="mt-2 px-3 py-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-sm flex items-center gap-2">
    <span>⚠️</span>
    <span>{errorMessage}</span>
  </div>
)}
```

**視覺效果：**
```
┌────────────────────────────────────────┐
│  [輸入留言...]              [發送]     │
└────────────────────────────────────────┘
┌────────────────────────────────────────┐
│ ⚠️ 留言至少需要 2 個字                 │  ← 紅色背景
└────────────────────────────────────────┘
```

**顏色設計：**
- 背景：`bg-red-500/10` - 淡紅色（10% 透明度）
- 邊框：`border-red-500/30` - 紅色邊框（30% 透明度）
- 文字：`text-red-400` - 紅色文字
- 圖標：⚠️ 警告符號

---

## 🔄 **互動邏輯**

### **1. 發送失敗時：**
```
用戶點擊「發送」
    ↓
API 返回錯誤（400/429）
    ↓
setErrorMessage(錯誤訊息)
    ↓
錯誤提示顯示在輸入框下方 ✅
    ↓
3 秒後自動消失
```

### **2. 用戶開始輸入時：**
```
用戶在輸入框打字
    ↓
onChange 觸發
    ↓
setErrorMessage("") ← 立即清空錯誤
    ↓
錯誤提示消失 ✅
```

### **3. 多次錯誤：**
```
第一次錯誤：顯示「留言至少需要 2 個字」
    ↓
用戶輸入 2 個字
    ↓
錯誤消失 ✅
    ↓
立即再發送
    ↓
第二次錯誤：顯示「請等待 3 秒後再留言」
    ↓
3 秒後自動消失或用戶開始輸入
```

---

## 📊 **錯誤訊息列表**

| 錯誤類型 | 提示文字 | HTTP | 圖標 |
|---------|---------|------|------|
| 內容太短 | 「留言至少需要 2 個字」 | 400 | ⚠️ |
| 內容太長 | 「留言最多 500 個字」 | 400 | ⚠️ |
| 重複內容 | 「請不要重複發送相同的留言」 | 400 | ⚠️ |
| 全局間隔 | 「請等待 X 秒後再留言」 | 429 | ⚠️ |
| 同圖間隔 | 「請等待 X 秒後再對此圖片留言」 | 429 | ⚠️ |
| 每日上限 | 「今日留言已達上限（50 條）」 | 429 | ⚠️ |
| 單圖上限 | 「你在此圖片的留言已達上限（20 條）」 | 429 | ⚠️ |

---

## 🎯 **與其他平台對比**

### **Twitter/X：**
```
錯誤提示：紅色文字，出現在輸入框下方
我們：✅ 相同設計
```

### **Instagram：**
```
錯誤提示：淡化的紅色背景框
我們：✅ 相同設計
```

### **YouTube：**
```
錯誤提示：內嵌在留言框下方
我們：✅ 相同設計
```

**結論：** 我們的設計符合主流平台的 UX 模式！✅

---

## ✅ **改進前後對比**

### **改進前：**
```
用戶留言太短
    ↓
alert 彈窗出現 ❌ 阻擋操作
    ↓
用戶需要點擊「確定」
    ↓
才能繼續輸入
```

### **改進後：**
```
用戶留言太短
    ↓
輸入框下方出現紅色提示 ✅ 不阻擋
    ↓
用戶立即看到問題
    ↓
開始輸入 → 提示自動消失 ✅
    ↓
或等待 3 秒 → 提示自動消失 ✅
```

---

## 🎊 **用戶體驗提升**

**更直觀：**
- ✅ 錯誤就在輸入框旁邊
- ✅ 視線不需要移動

**更友好：**
- ✅ 不阻擋操作（alert 會阻擋）
- ✅ 自動消失（不需要點擊）

**更現代：**
- ✅ 符合主流平台設計
- ✅ 視覺效果專業

---

**現在試試看，錯誤提示應該會出現在輸入框正下方了！** 🎉✨

