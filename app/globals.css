@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #0a0a0a;
  --foreground: #ededed;
}

/* 強制暗色主題，忽略系統主題偏好 */
html {
  overflow-anchor: auto;
  color-scheme: dark;
}

body {
  background: var(--background) !important;
  color: var(--foreground) !important;
  font-family: Arial, Helvetica, sans-serif;
  overflow-anchor: auto;
}

/* 確保所有元素都使用暗色主題 */
* {
  color-scheme: dark;
}

/* 防止瀏覽器自動調整顏色 */
input, textarea, select, button {
  color-scheme: dark;
}

.my-masonry-grid {
  display: -webkit-box; 
  display: -ms-flexbox;
  display: flex;
  margin-left: -16px; /* gutter size offset */
  width: auto;
}
.my-masonry-grid_column {
  padding-left: 16px; /* gutter size */
  background-clip: padding-box;
}
.my-masonry-grid_column > div {
  margin-bottom: 16px;
}

/* stylelint-enable at-rule-no-unknown */

/* ===== 貓咪播放器動畫 ===== */

/* 音符飄動動畫 */
@keyframes float-1 {
  0%, 100% { 
    transform: translate(0, 0) rotate(0deg) scale(1); 
    opacity: 0.8;
  }
  25% { 
    transform: translate(8px, -8px) rotate(15deg) scale(1.1); 
    opacity: 1;
  }
  50% { 
    transform: translate(12px, -15px) rotate(25deg) scale(1.2); 
    opacity: 0.9;
  }
  75% { 
    transform: translate(6px, -10px) rotate(10deg) scale(1.05); 
    opacity: 1;
  }
}

@keyframes float-2 {
  0%, 100% { 
    transform: translate(0, 0) rotate(0deg) scale(1); 
    opacity: 0.7;
  }
  33% { 
    transform: translate(-6px, -12px) rotate(-20deg) scale(1.3); 
    opacity: 1;
  }
  66% { 
    transform: translate(-10px, -8px) rotate(-10deg) scale(0.9); 
    opacity: 0.8;
  }
}

@keyframes float-3 {
  0%, 100% { 
    transform: translate(0, 0) rotate(0deg) scale(1); 
    opacity: 0.6;
  }
  50% { 
    transform: translate(5px, -12px) rotate(20deg) scale(1.2); 
    opacity: 1;
  }
}

@keyframes float-4 {
  0%, 100% { 
    transform: translate(0, 0) rotate(0deg) scale(1); 
    opacity: 0.5;
  }
  40% { 
    transform: translate(-4px, -8px) rotate(-15deg) scale(1.1); 
    opacity: 0.9;
  }
  80% { 
    transform: translate(-2px, -4px) rotate(-5deg) scale(0.95); 
    opacity: 0.7;
  }
}

/* 應用動畫類別 */
.animate-float-1 {
  animation: float-1 3s ease-in-out infinite;
  animation-delay: 0s;
}

.animate-float-2 {
  animation: float-2 2.5s ease-in-out infinite;
  animation-delay: 0.5s;
}

.animate-float-3 {
  animation: float-3 3.5s ease-in-out infinite;
  animation-delay: 1s;
}

.animate-float-4 {
  animation: float-4 2.8s ease-in-out infinite;
  animation-delay: 1.5s;
}

/* 貓咪律動跳動動畫 - 流順的雀躍感覺 */
@keyframes cat-dance-smooth {
  0% { 
    transform: translateY(0) translateX(0) rotate(0deg) scale(1); 
  }
  15% { 
    transform: translateY(-6px) translateX(-2px) rotate(-1deg) scale(1.01); 
  }
  30% { 
    transform: translateY(-10px) translateX(0) rotate(0deg) scale(1.02); 
  }
  45% { 
    transform: translateY(-6px) translateX(2px) rotate(1deg) scale(1.01); 
  }
  60% { 
    transform: translateY(-8px) translateX(-1px) rotate(-0.5deg) scale(1.015); 
  }
  75% { 
    transform: translateY(-12px) translateX(1px) rotate(0.5deg) scale(1.025); 
  }
  90% { 
    transform: translateY(-4px) translateX(0) rotate(0deg) scale(1.005); 
  }
  100% { 
    transform: translateY(0) translateX(0) rotate(0deg) scale(1); 
  }
}

/* 舊版動畫（保留備用） */
@keyframes cat-dance {
  0% { 
    transform: translateY(0) translateX(0) rotate(0deg) scale(1); 
  }
  10% { 
    transform: translateY(-8px) translateX(-3px) rotate(-2deg) scale(1.02); 
  }
  20% { 
    transform: translateY(-12px) translateX(0) rotate(0deg) scale(1.05); 
  }
  30% { 
    transform: translateY(-8px) translateX(3px) rotate(2deg) scale(1.02); 
  }
  40% { 
    transform: translateY(-4px) translateX(0) rotate(0deg) scale(1.01); 
  }
  50% { 
    transform: translateY(-10px) translateX(-2px) rotate(-1deg) scale(1.03); 
  }
  60% { 
    transform: translateY(-14px) translateX(2px) rotate(1deg) scale(1.06); 
  }
  70% { 
    transform: translateY(-6px) translateX(-1px) rotate(-0.5deg) scale(1.02); 
  }
  80% { 
    transform: translateY(-8px) translateX(1px) rotate(0.5deg) scale(1.03); 
  }
  90% { 
    transform: translateY(-4px) translateX(0) rotate(0deg) scale(1.01); 
  }
  100% { 
    transform: translateY(0) translateX(0) rotate(0deg) scale(1); 
  }
}

/* 舊版簡單跳動動畫（保留作為備用） */
@keyframes cat-bounce {
  0%, 100% { 
    transform: translateY(0) scale(1); 
  }
  25% { 
    transform: translateY(-8px) scale(1.02); 
  }
  50% { 
    transform: translateY(-12px) scale(1.05); 
  }
  75% { 
    transform: translateY(-6px) scale(1.01); 
  }
}

/* 彩虹色變換動畫 */
@keyframes rainbow-shift {
  0% { filter: hue-rotate(0deg) saturate(1.2) brightness(1.1); }
  16% { filter: hue-rotate(60deg) saturate(1.2) brightness(1.1); }
  33% { filter: hue-rotate(120deg) saturate(1.2) brightness(1.1); }
  50% { filter: hue-rotate(180deg) saturate(1.2) brightness(1.1); }
  66% { filter: hue-rotate(240deg) saturate(1.2) brightness(1.1); }
  83% { filter: hue-rotate(300deg) saturate(1.2) brightness(1.1); }
  100% { filter: hue-rotate(360deg) saturate(1.2) brightness(1.1); }
}

/* 應用彩虹動畫 */
.animate-rainbow {
  animation: rainbow-shift 3s linear infinite;
}

/* 音波擴散動畫 */
@keyframes sound-wave {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

.animate-sound-wave {
  animation: sound-wave 2s ease-out infinite;
}

/* 貓咪律動跳動動畫類別 */
.animate-cat-dance {
  animation: cat-dance 2s ease-in-out infinite;
  animation-timing-function: cubic-bezier(0.4, 0, 0.6, 1);
}

.animate-cat-dance-smooth {
  animation: cat-dance-smooth 2.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
}

/* RGB 流光動畫 */
@keyframes rgb-flow {
  0% { 
    background-position: 0% 50%; 
  }
  50% { 
    background-position: 100% 50%; 
  }
  100% { 
    background-position: 0% 50%; 
  }
}

.animate-rgb-flow {
  animation: rgb-flow 6s ease infinite;
}

/* YouTube 錯誤提示動畫 */
@keyframes slide-up {
  0% {
    transform: translateY(100%);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

/* ===== 全站共用：跑馬燈動畫 ===== */
@keyframes marquee-scroll {
  0% {
    transform: translateX(calc(0px + var(--scroll-offset, 0px)));
  }
  100% {
    transform: translateX(calc(-50% + var(--scroll-offset, 0px)));
  }
}

@keyframes marquee-scroll-right {
  0% {
    transform: translateX(calc(-50% + var(--scroll-offset, 0px)));
  }
  100% {
    transform: translateX(calc(0px + var(--scroll-offset, 0px)));
  }
}

.marquee-track {
  width: max-content;
  animation: marquee-scroll var(--marquee-duration, 40s) linear infinite;
  will-change: transform;
}

.marquee-track-right {
  width: max-content;
  animation: marquee-scroll-right var(--marquee-duration, 40s) linear infinite;
  will-change: transform;
}

.group:hover .marquee-track,
.group:hover .marquee-track-right {
  animation-play-state: paused;
}

@media (prefers-reduced-motion: reduce) {
  .marquee-track,
  .marquee-track-right {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }
}

.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

.no-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* ===== TipTap 编辑器样式 ===== */
.ProseMirror {
  outline: none;
  min-height: 300px;
}

.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: #9ca3af;
  pointer-events: none;
  height: 0;
}

.ProseMirror p {
  margin: 0.75rem 0;
  line-height: 1.75;
}

.ProseMirror h1,
.ProseMirror h2,
.ProseMirror h3 {
  font-weight: bold;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

.ProseMirror h1 {
  font-size: 2rem;
  border-bottom: 1px solid #3f3f46;
  padding-bottom: 0.5rem;
}

.ProseMirror h2 {
  font-size: 1.5rem;
  border-bottom: 1px solid #3f3f46;
  padding-bottom: 0.5rem;
}

.ProseMirror h3 {
  font-size: 1.25rem;
}

.ProseMirror ul,
.ProseMirror ol {
  padding-left: 1.5rem;
  margin: 0.75rem 0;
}

.ProseMirror li {
  margin: 0.25rem 0;
}

.ProseMirror blockquote {
  border-left: 4px solid #3b82f6;
  padding-left: 1rem;
  margin: 1rem 0;
  font-style: italic;
  color: #9ca3af;
}

.ProseMirror code {
  background-color: #27272a;
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-size: 0.875rem;
  font-family: monospace;
  color: #f472b6;
}

.ProseMirror pre {
  background-color: #18181b;
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin: 1rem 0;
}

.ProseMirror pre code {
  background-color: transparent;
  padding: 0;
  color: #e4e4e7;
}

.ProseMirror a {
  color: #60a5fa;
  text-decoration: underline;
}

.ProseMirror a:hover {
  color: #93c5fd;
}

.ProseMirror img {
  max-width: 100%;
  height: auto;
  border-radius: 0.5rem;
  margin: 1rem 0;
}

/* ===== Markdown 渲染样式 ===== */
.markdown-content {
  color: #d4d4d8;
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4,
.markdown-content h5,
.markdown-content h6 {
  color: #ffffff;
  font-weight: bold;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

.markdown-content h1 {
  font-size: 2rem;
  border-bottom: 1px solid #3f3f46;
  padding-bottom: 0.5rem;
}

.markdown-content h2 {
  font-size: 1.5rem;
  border-bottom: 1px solid #3f3f46;
  padding-bottom: 0.5rem;
}

.markdown-content h3 {
  font-size: 1.25rem;
}

.markdown-content p {
  color: #d4d4d8;
  margin-bottom: 1rem;
  line-height: 1.75;
}

.markdown-content a {
  color: #60a5fa;
  text-decoration: underline;
}

.markdown-content a:hover {
  color: #93c5fd;
}

.markdown-content code {
  background-color: #27272a;
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-size: 0.875rem;
  font-family: monospace;
  color: #f472b6;
}

.markdown-content pre {
  background-color: #18181b;
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin: 1rem 0;
}

.markdown-content pre code {
  background-color: transparent;
  padding: 0;
  color: #e4e4e7;
}

.markdown-content ul,
.markdown-content ol {
  padding-left: 1.5rem;
  margin: 0.75rem 0;
  color: #d4d4d8;
}

.markdown-content li {
  margin: 0.25rem 0;
}

.markdown-content blockquote {
  border-left: 4px solid #3b82f6;
  padding-left: 1rem;
  margin: 1rem 0;
  font-style: italic;
  color: #9ca3af;
}

.markdown-content img {
  max-width: 100%;
  height: auto;
  border-radius: 0.5rem;
  margin: 1rem 0;
}
